{% import "./banner.html" as banner with context %}

{{ banner.bannerMacro() }}

<div class="w-full bg-white shadow-sm sticky top-0 z-50">
  <nav class="max-w-7xl mx-auto px-4 sm:px-6 flex items-center justify-between flex-wrap py-4" x-data="{ isOpen: false }" @keydown.escape="isOpen = false" @click.away="isOpen = false">

    <!-- Logo -->
    <a href="/" class="flex items-center gap-3 group">
      <div class="bg-[color:var(--dark-color)] rounded-full p-1.5">
        <img src="{{ settings.logoUrl }}" alt="{{ settings.logoAlt }}" width="60" height="60" class="h-12 w-auto" />
      </div>
      <span class="text-xl font-bold text-[color:var(--dark-color)] group-hover:text-[color:var(--primary-color)] transition-colors">
        {{ settings.siteName }}
      </span>
    </a>

    <!-- Mobile Menu Toggle -->
    <button
      @click="isOpen = !isOpen"
      type="button"
      class="lg:hidden p-2 rounded-lg text-[color:var(--dark-color)] hover:bg-[color:var(--secondary-colour)] transition-colors focus:outline-none focus:ring-2 focus:ring-[color:var(--primary-color)]"
      aria-label="Toggle menu"
    >
      <svg x-show="!isOpen" class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
      </svg>
      <svg x-show="isOpen" x-cloak class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
      </svg>
    </button>

    <!-- Desktop Navigation -->
    <div class="hidden lg:flex lg:items-center lg:gap-1">
      {% if navigation.items %}
        {% for item in navigation.items %}
          {% if item.showInPrimary %}
            <a
              href="{{ item.url }}"
              class="px-4 py-2 rounded-full text-[color:var(--dark-color)] font-medium hover:bg-[color:var(--secondary-colour)] hover:text-[color:var(--primary-dark)] transition-all duration-200"
            >
              {{ item.text }}
            </a>
          {% endif %}
        {% endfor %}
      {% endif %}

    </div>

    <!-- Mobile Navigation -->
    <div
      x-show="isOpen"
      x-transition:enter="transition ease-out duration-200"
      x-transition:enter-start="opacity-0 -translate-y-2"
      x-transition:enter-end="opacity-100 translate-y-0"
      x-transition:leave="transition ease-in duration-150"
      x-transition:leave-start="opacity-100 translate-y-0"
      x-transition:leave-end="opacity-0 -translate-y-2"
      x-cloak
      class="w-full lg:hidden mt-4 pb-4 border-t border-gray-100 pt-4"
    >
      <div class="flex flex-col gap-2">
        {% if navigation.items %}
          {% for item in navigation.items %}
            {% if item.showInPrimary %}
              <a
                @click="isOpen = false"
                href="{{ item.url }}"
                class="px-4 py-3 rounded-xl text-[color:var(--dark-color)] font-medium hover:bg-[color:var(--secondary-colour)] transition-colors text-center"
              >
                {{ item.text }}
              </a>
            {% endif %}
          {% endfor %}
        {% endif %}

        <a
          @click="isOpen = false"
          href="/book-a-free-call/"
          class="btn-primary text-center mt-2"
        >
          Get Started
        </a>
      </div>
    </div>

  </nav>
</div>
